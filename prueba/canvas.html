<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas</title>

    <style>
        body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    color: white;
}

h1 {
    background: #7F7FD5;
    background: -webkit-linear-gradient(to right, #91EAE4, #86A8E7, #7F7FD5);
    background: linear-gradient(to right, #91EAE4, #86A8E7, #7F7FD5);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.container {
    height: 100%;
    display: flex;
}

#toolbar {
    display: flex;
    flex-direction: column;
    padding: 5px;
    width:120px;
    background-color: #202020;
}

#toolbar * {
    margin-bottom: 6px;
}

#toolbar label {
    font-size: 12px;
}

#toolbar input {
    width: 95%;
}

#toolbar button {
    background-color: #1565c0;
    border: none;
    border-radius: 4px;
    color:white;
    padding: 2px;
}
    </style>
</head>
<body>
    <section class="container">
        <div id="toolbar">
            <h1>Draw.</h1>
            <button id="startAnimation">Iniciar animacion</button>
            <label for="color">Color</label>
            <input id="color" name='color' type="color">
            <label for="Espesor">Espesor</label>
            <input id="Espesor" name='Espesor' type="number" value="5">
            <button id="clear">Clear</button>
        </div>
        <div class="drawing-board">
            <canvas id="drawing-board"></canvas>
        </div>
    </section>
    <script>
        const canvas = document.getElementById('drawing-board');
        const toolbar = document.getElementById('toolbar');
        const ctx = canvas.getContext('2d');

        const canvasOffsetX = canvas.offsetLeft;
        const canvasOffsetY = canvas.offsetTop;

        canvas.width = window.innerWidth - canvasOffsetX;
        canvas.height = window.innerHeight - canvasOffsetY;

         // Dibujo inicial del auto al cargar la página
         const drawCar = (x, y, color) => {
            ctx.fillStyle = color;
            ctx.fillRect(x, y, 100, 50); // Cuerpo del auto
            ctx.fillRect(x + 10, y - 30, 80, 30); // Techo del auto
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(x + 25, y + 50, 15, 0, Math.PI); // Rueda izquierda
            ctx.arc(x + 75, y + 50, 15, 0, Math.PI); // Rueda derecha
            ctx.fill();
        };

        drawCar(50, canvas.height - 100, '#FF5733'); // Dibujar el auto inicialmente

        let isPainting = false;
        let lineWidth = 5;
        let startX;
        let startY;

        toolbar.addEventListener('click', e => {
            if (e.target.id === 'clear') {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
        });

        toolbar.addEventListener('change', e => {
            if (e.target.id === 'color') {
                ctx.strokeStyle = e.target.value;
            }

            if (e.target.id === 'Espesor') {
                lineWidth = e.target.value;
            }

        });

        const draw = (e) => {
            if (!isPainting) {
                return;
            }

            ctx.lineWidth = lineWidth;
            ctx.lineCap = 'round';

            ctx.lineTo(e.clientX - canvasOffsetX, e.clientY);
            ctx.stroke();
        }

        canvas.addEventListener('mousedown', (e) => {
            isPainting = true;
            startX = e.clientX;
            startY = e.clientY;
        });

        canvas.addEventListener('mouseup', e => {
            isPainting = false;
            ctx.stroke();
            ctx.beginPath();
        });

        canvas.addEventListener('mousemove', draw);

        const animate = () => {
            let posX = 0;
            let animationInterval;

            const animateFrame = () => {
                // Borrar el contenido del canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Dibujar el contenido (el mismo dibujo que ya tienes)
                ctx.beginPath();
                ctx.strokeStyle = document.getElementById('color').value;
                ctx.lineWidth = lineWidth;
                ctx.moveTo(startX + posX, startY);
                ctx.lineTo(startX + posX + 50, startY); // Se mueve hacia la derecha en 50 unidades (puedes ajustar esto)
                ctx.stroke();

                // Actualizar la posición para el siguiente frame
                posX += 5; // Incrementar la posición (puedes ajustar esto para cambiar la velocidad)

                // Detener la animación después de 4 segundos (4000 ms)
                if (posX >= canvas.width - startX - 50) {
                    clearInterval(animationInterval);
                }
            };

            // Iniciar la animación utilizando setInterval
            animationInterval = setInterval(animateFrame, 16.67); // Aproximadamente 60 FPS (1000 ms / 60)
        };

        // Evento al hacer clic en el botón "Iniciar animación"
        document.getElementById('startAnimation').addEventListener('click', () => {
            animate();
        });
    </script>
</body>
</html>
